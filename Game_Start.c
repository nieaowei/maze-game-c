//
//  Game_Start.c
//  MAZEGAME
//
//  Created by nieaowei on 2019/1/10.
//  Copyright 漏 2019 nieaowei. All rights reserved.
//
#include "Game_Start.h"
//#include "Game_Function.h"
//初始界面
void UIStart1(){ 
	system("cls");
printf(" ---------------------------------------------------------------------------------------------------------------- \n");
printf("|                             #***##*********++=                       #**************++-                        |\n");             
printf("|                         #############**********+++-             ############**********++++-                    |\n");             
printf("|                      ####################********++++=       *###############*********++++++=-                 |\n");          
printf("|                    #######################*********+++++   ##################**********++++++==-               |\n");       
printf("|                   #######################*****************##################*********+++++++====-+             |\n");    
printf("|                 ########################*****************###############************+*+++++++===--:            |\n"); 
printf("|                ########################*#****************#############**************+++++++++====--:           |\n");
printf("|               ###########################****+----------------------------+********++++++++++====---:          |\n");
printf("|              ###########################*****|   迷   宫   小   游   戏   |******+++++++++++=====---:=         |\n");
printf("|              #########################*******+----------------------------+******+++++++++=======---::         |\n");
printf("|             #########################*#*****************************************+++++++++========---::=        |\n");
printf("|             *#######################**#**************************************+++++++++++++======----::.        |\n");
printf("|             *####################**##***************************************++++++++++++=======----:::.        |\n");
printf("|             ***##############**###*#***************************************+++++++++++++======-----:::.        |\n");
printf("|             ****##########*###****#**************************************+++++++++++++========-----:::.        |\n");
printf("|             *******##*************************************************+++++++++++++++=======------:::..        |\n");
printf("|             +***************************+--------------+*********+*+++++++++++++++==========-----::::..        |\n");
printf("|              ***************************|1. 开 始 游 戏|********+*+++++++++++++++=========-------:::..         |\n");
printf("|              +**************************+--------------+****+****++++++++++++++==========-------:::...         |\n");
printf("|               +**********************************************+++**+++++++++++=+========-------:::::..          |\n");
printf("|               ++*********************************++*********+++*+++++++++++============------:::::...          |\n");
printf("|                ++*******************************+*+********+**++++--------------+====-------:::::...           |\n");
printf("|                 ++++***************************+**+++***+++++++++|2. 退 出 游 戏|==--------:::::...            |\n");
printf("|                  +++++***************+*******+*++++++*++++++++++++--------------+==------::::::...             |\n");
printf("|                   +++++**+*+**+*****+*+**++++*++++++++++++++++++++==+===========--------::::::....             |\n");
printf("|                    ++++++++*++*+*++*+++++-------------------------------------+-------::::::....               |\n");
printf("|                     =++++++++++++++*++++|游 戏 说 明:                         |------::::::....                |\n");
printf("|                      ==+++++++++++++++++|                 +-+                 |-----:::::.....                 |\n");
printf("|                       ==++++++++++++++++|                 |W|                 |--:::::::.....                  |\n");
printf("|                         ===+++++++++++++|                 +-+                 |-::::::.....                    |\n");
printf("|                          ====+++++++++++|                  上                 |:::::......                     |\n");
printf("|                            ======+++++++|          +-+    +-+    +-+          |:::......                       |\n");
printf("|                              ======+=+++|          |A|    |S|    |D|          |::.....                         |\n");
printf("|                                ========+|          +-+    +-+    +-+          |.....                           |\n");
printf("|                                  =======|           左     下     右          |...                             |\n");
printf("|                                    -====+-------------------------------------+.                               |\n");
printf("|                                      --====================-----:::::::.......                                 |\n");
printf("|                                         --===============-----:::::::......                                    |\n");
printf("|                                           ----===========----:::::.......                                      |\n");
printf("|                                             ----=======----::::......                                          |\n");
printf("|                                                 -----==---:::......                                            |\n");
printf("|                                                    -------::....                                               |\n");
printf("|                                                       ---:...                                                  |\n");
printf("|                                                         -:.\"                                                   |\n");
printf(" ---------------------------------------------------------------------------------------------------------------- \n");
printf(" ---------------------------------------------------------------------------------------------------------------- \n");
}
//窗口初始化
void InitiWindow(){
	char title[100]="nieaowei";
	HWND hwnd;
	GetConsoleTitle(title,100);
	hwnd=FindWindow(NULL,title);
	MoveWindow(hwnd,50,0,768,768,TRUE);
	system("mode con cols=220 lines=60");
	system("title 迷宫小游戏1.0 Power By Nieaowei");
//	SetWindowPos( hwnd,0,0,0,1000,768,SWP_NOZORDER );
	Game.Start=Game_Start;
	Game.Initi=InitiGame;
	Game.Control=Control;
}
void UIEnd1(){
printf(" ---------------------------------------------------------------------------------------------------------------- \n");
printf("|                             #***##*********++=                       #**************++-                        |\n");             
printf("|                         #############**********+++-             ############**********++++-                    |\n");             
printf("|                      ####################********++++=       *###############*********++++++=-                 |\n");          
printf("|                    #######################*********+++++   ##################**********++++++==-               |\n");       
printf("|                   #######################*****************##################*********+++++++====-+             |\n");    
printf("|                 ########################*****************###############************+*+++++++===--:            |\n"); 
printf("|                ########################*#****************#############**************+++++++++====--:           |\n");
printf("|               ###########################***************#*#########****************++++++++++====---:          |\n");
printf("|              ###########################****+----------------------------+*******+++++++++++=====---:=         |\n");
printf("|              #########################******|   迷   宫   小   游   戏   |******++++++++++=======---::         |\n");
printf("|             #########################*#*****+----------------------------+******+++++++++========---::=        |\n");
printf("|             *#######################**#**************************************+++++++++++++======----::.        |\n");
printf("|             *####################**##***************************************++++++++++++=======----:::.        |\n");
printf("|             ***##############**###*#***************************************+++++++++++++======-----:::.        |\n");
printf("|             ****##########*###****#**************************************+++++++++++++========-----:::.        |\n");
printf("|             *******##*************************************************+++++++++++++++=======------:::..        |\n");
printf("|             +***************************+--------------+*********+--------------++==========-----::::..        |\n");
printf("|              ***************************|  G  a  m  e  |********+|1> 继 续 游 戏|=========-------:::..         |\n");
printf("|              +***************************--------------*****+****+--------------=========-------:::...         |\n");
printf("|               +**********************************************+++**+++++++++++=+========-------:::::..          |\n");
printf("|               ++*********************************++*********+++*+++++++++++============------:::::...          |\n");
printf("|                ++***********************+--------------+***+**++++--------------+====-------:::::...           |\n");
printf("|                 ++++********************|2> 返 回 游 戏|+++++++++|  O  v  e  r  |==--------:::::...            |\n");
printf("|                  +++++***************+**+--------------+++++++++++--------------+==------::::::...             |\n");
printf("|                   +++++**+*+**+*****+*+**++++*++++++++++++++++++++==+===========--------::::::....             |\n");
printf("|                    ++++++++*++*+*++*++++**++++++++++----------------==========--------::::::....               |\n");
printf("|                     =++++++++++++++*+++++++++++++++| 最 终 步 数: %d |=======-=-------::::::....               |\n",StepNUM);
printf("|                      ==+++++++++++++++++++++++++++++----------------=======---------:::::.....                 |\n");
printf("|                       ==++++++++++++++++++++++++++++++++++++=============--------:::::::.....                  |\n");
printf("|                         ===++++++++++++++++++++++++++++++++=============--------::::::.....                    |\n");
printf("|                          ====++++++++++++++++++++++++++++=+=========----------::::::......                     |\n");
printf("|                            ======++++++++++++++++++++++==+=========----------:::::......                       |\n");
printf("|                              ======+=++++++++++++++++++=+=======----------:::::::.....                         |\n");
printf("|                                ========+++=++++++=+++++========---------:::::::.....                           |\n");
printf("|                                  =================+=+========--------:::::::......                             |\n");
printf("|                                    -========================-------:::::::......                               |\n");
printf("|                                      --====================-----:::::::.......                                 |\n");
printf("|                                         --===============-----:::::::......                                    |\n");
printf("|                                           ----===========----:::::.......                                      |\n");
printf("|                                             ----=======----::::......                                          |\n");
printf("|                                                 -----==---:::......                                            |\n");
printf("|                                                    -------::....                                               |\n");
printf("|                                                       ---:...                                                  |\n");
printf("|                                                         -:.\"                                                   |\n");
printf(" ---------------------------------------------------------------------------------------------------------------- \n");
printf(" ---------------------------------------------------------------------------------------------------------------- \n");
}
void Game_Start(){
	int option;
	StepNUM=0;
	Game.Initi();
	while(1){
		Game.Control(Game.Role);
		system("cls");
		Game.Repaint(Game.Map);
		Step_Num();
		printf("\n注:按ESC键返回主菜单。");
		if(OrEnd(Game.Role,Game.Map))
		{
			system("cls");
			UIEnd1();
			printf("请输入您的选择:");
			scanf("%d",&option);
			if(option==1){
				Game_Start();
			}
			else if(option==2)
				break;
			else {
				printf("\n输入有误!3秒自动返回菜单");
				Sleep(3000);
				break;
			}
		}

	}
	//printf("%d",Game.Graph.Array[0][1]);
	//print();
}
void Main(){
	int option;
	while(1){
		UIStart1();
		printf("请输入您的选项:");
		scanf("%d",&option);
		switch(option){
		case 1:
			Game.Start();
			break;
		case 2:
			exit(0);
			break;
		}
	}
}